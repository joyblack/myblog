# 简介
打包流程包括web和java一起，他们是以组合发布的方式打包。需要控制的3个包：
* java包
* web包
* ansible包

# 提交代码
统一在公司的gitlab仓库提交代码。

# 旧打包流程
1、进入三个git本地目录
```
git pull
```

2、根据不同的版本号设置ansible项目的版本标签，其中XX为版本号
```
// 查看当前标签号，然后往前加1
git tag

# 添加新标签，加1
git tag 3.1.xxx

# 提交本地标签信息到gitlab
git push --tags
```

3、为web和japi以及ansible设置版本号，其实就对应标签号。
> 当然，如果您忘记了打包规范，可以使用`git tag`命令查看历史版本的标签格式。

4、在代码集成服务器目前是192.168.0.62，执行release.sh脚本，分别输入三个包对应的版本号的末尾数字（例如3.1.37输入37即可），运行即可生成版本包，执行发布。
```
cd dfs_package
sh releash.sh
```

5、最后，将发布包给测试人员进行测试，若没有问题，将此包移到归档目录.
```
mv xxxx ../dfs_version_library
```

# 附录
1、如果你的标签出现了错误，例如忘记提交最新的内容。那么可以通过如下的命令删除掉提交错的标签信息：
```
git tag -d 标签号
git push origin :refs/tags/标签号
```
这样做之后，您就可以再次通过上述步骤进行标签的更新了。